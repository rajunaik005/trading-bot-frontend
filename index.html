<script>
  const BASE = "https://trading-bot-backend-47q9.onrender.com";

  function startBot() {
    const market = document.getElementById("market").value;
    fetch(`${BASE}/start/${market}`)
      .then(r => r.json())
      .then(d => document.getElementById("msg").innerText = d.status)
      .catch(e => alert("Start bot failed"));
  }

  function stopBot() {
    fetch(`${BASE}/stop`)
      .then(r => r.json())
      .then(d => document.getElementById("msg").innerText = d.status)
      .catch(e => alert("Stop bot failed"));
  }

  function loadTrades() {
    fetch(`${BASE}/trades`)
      .then(r => r.json())
      .then(data => {
        const tbody = document.querySelector("#tradeTable tbody");
        tbody.innerHTML = "";
        data.forEach(t => {
          const row = `
            <tr>
              <td>${t.time}</td>
              <td>${t.symbol}</td>
              <td>${t.price}</td>
              <td>${t.qty}</td>
              <td>${t.status}</td>
            </tr>`;
          tbody.innerHTML += row;
        });
      })
      .catch(e => alert("Load trades failed"));
  }
</script>
